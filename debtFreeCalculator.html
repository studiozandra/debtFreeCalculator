<!DOCTYPE html>
<!-- licensed under the GNU General Public License v3.0 -->
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script>
      //     window.onload = function() {
      
      // document.getElementById('add').addEventListener('click', function Clone (e) {
      //   var ok = true;
    
      //   if (ok === true) {
      //     console.log("clicked")
      //     var addDebt = document.getElementsByClassName("amountAndInterest")[0].cloneNode(true)
      //     var cloneDebt = addDebt.cloneNode(true);
      //     var formGroup = document.getElementsByClassName("form-group");
      //     e.target.formGroup.appendChild(cloneDebt);
      //   }
    
        
      // });
      
      // };
      
      </script>


  <style>
    body{
      margin-top:70px;
      background-color: #333;
      color: white;
      /* background: url(https://studiozandra.com/test/assets/img/20171022_chinahatmaybe.jpg) no-repeat;
      background-size:auto; */
      background: linear-gradient(45deg, #9682C8 10%, #05BCC9);
    }


    #startDate{
      background-color: gray;
    }

    #freedomDate{
      border-radius: 7px;
    }

    #output{
      background: rgba(0, 0, 0, 0.2);
    }

    #needPay{
      color: #101A2B;
      /* ffc107 */
    }

    span{
      display: flex;
      justify-content: space-between;
    }

    #totTime1{
      background: rgba(0, 0, 0, 0.2);
      width: 33%;
    }

    #totTime2{
      background: rgba(0, 0, 0, 0.2);
      width: 33%;
    }

    #totTime3{
      background: rgba(0, 0, 0, 0.2);
      width: 33%;
    }
    .form-control {
    display: inline-block;
    width: 90%;
    }

  </style>

  <title>Debt-Free Date Calculator App</title>

</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <h1 class="display-4 text-center">
          Pay ($$$) to be debt-free by (date).
        </h1> <!-- end display-4 h1 ele -->
        <form>
          <div class="form-group">
              <div id="start_date"><p><label class="form">Starting today </label><input type="date" class="textbox" id="startDate"></p></div>
        
              <div id="freedom_date"><p><label class="form">Desired Debt Freedom Date: </label><input type="date" class="textbox" id="freedomDate"></p></div>
                <div id="amountAndInterest0">
                  <input id="debtInput0" type="text" class="form-control form-control-lg mb-2" placeholder="Enter debt amount...">

                  <input id="rateInput0" type="text" class="form-control form-control-lg" placeholder="Enter the interest rate..."><img src="plus-sign.png" id="add" alt="Add another debt" height="50" width="50">
                </div>
                <div id="amountAndInterest1" class="additionalDebt">
                  <input id="Debt2" type="text" class="form-control form-control-lg mb-2" placeholder="Enter another debt amount...">
  
                  <input id="rate2" type="text" class="form-control form-control-lg" placeholder="Enter interest rate..."><img src="minus-sign.png" id="remove1" alt="remove this debt" height="50" width="50">
                </div>
                <div id="amountAndInterest2" class="additionalDebt">
                  <input id="Debt3" type="text" class="form-control form-control-lg mb-2" placeholder="Enter third debt amount...">
    
                  <input id="rate3" type="text" class="form-control form-control-lg" placeholder="Enter interest rate..."><img src="minus-sign.png" id="remove2" alt="remove this debt" height="50" width="50">
                </div>
                <div id="amountAndInterest3" class="additionalDebt">
                  <input id="Debt4" type="text" class="form-control form-control-lg mb-2" placeholder="Enter fourth debt amount...">
      
                  <input id="rate4" type="text" class="form-control form-control-lg" placeholder="Enter interest rate..."><img src="minus-sign.png" id="remove3" alt="remove this debt" height="50" width="50">
                </div>
              </div>
          
          
          <div id="output">
            <div class="card bg-warning mb-2" id="needPay">
              <div class="card-body">
                <h4>Needed Monthly Payment: </h4>  
                <div id="monthlyPayOutput"></div>
              </div>
            </div>
            <span>
              <div class="card mb-2" id="totTime1">
                  <div class="card-body">
                    <h4>Days: </h4>  
                    <div id="numdays"></div>
                  </div>
                </div>

              <div class="card mb-2" id="totTime2">
                <div class="card-body">
                  <h4>Months: </h4>  
                  <div id="numMonths"></div>
                </div>
              </div>

              <div class="card mb-2" id="totTime3">
                <div class="card-body">
                  <h4>Years: </h4>  
                  <div id="numYears"></div>
                </div>
              </div>
            </span>

            

            <br>

          </div> <!-- end outputs div -->
        </form>
      </div>
    </div>
  </div> <!-- end container div -->


  <script>
    document.getElementById('amountAndInterest1').style.display = 'none';
    document.getElementById('amountAndInterest2').style.display = 'none';
    document.getElementById('amountAndInterest3').style.display = 'none';

      document.getElementById("add").onclick = function () {
        // var ok = true;
    
         if (document.getElementById('amountAndInterest1').style.display == 'none') {
          document.getElementById('amountAndInterest1').style.display = 'block';    
         }else if (document.getElementById('amountAndInterest1').style.display == 'block'){
          document.getElementById('amountAndInterest2').style.display = 'block';
         }else if (document.getElementById('amountAndInterest2').style.display == 'block'){
          document.getElementById('amountAndInterest3').style.display = 'block';
         }else {
           document.getElementById('amountAndInterest3').style.display = 'block'; // 3 is not working
         };
      }
         
    
    document.getElementById("remove1").onclick = function () {
        // var ok = true;
    
         if (document.getElementById('amountAndInterest1').style.display == 'block') {
          console.log("clicked minus")
          document.getElementById('amountAndInterest1').style.display = 'none';    
         }
        
    };
    document.getElementById("remove2").onclick = function () {
        // var ok = true;
    
         if (document.getElementById('amountAndInterest2').style.display == 'block') {
          document.getElementById('amountAndInterest2').style.display = 'none';    
         }
        
    };
    document.getElementById("remove3").onclick = function () {
        // var ok = true;
    
         if (document.getElementById('amountAndInterest3').style.display == 'block') {
          document.getElementById('amountAndInterest3').style.display = 'none';    
         }
        
    };

    
    document.getElementById('output').style.visibility = 'hidden';
    document.getElementById('startDate').style.visibility = 'hidden';
    document.getElementById('startDate').valueAsDate = new Date();
    


    function calc(){
      document.getElementById('output').style.visibility = 'visible';
      let interestRate = document.getElementById('rateInput0').value;
      const rate = ((interestRate / 12) / 100);
      const debt = document.getElementById("debtInput0").value;
      
      const freeDt = new Date(document.getElementById("freedomDate").value);
      const totalDays = parseInt((freeDt - new Date) / (1000 * 60 * 60 * 24));
      
      const months = totalDays / 30.44;

      // This is the loan amortization formula:
      const monthlyPmt = parseFloat((rate * debt) / (1 - (Math.pow((1 + rate), (-months)))));

     
      document.getElementById('monthlyPayOutput').innerHTML = (monthlyPmt).toFixed(2);
      
      // The bottom 3 output divs:
      document.getElementById('numdays').innerHTML = totalDays;
      document.getElementById('numMonths').innerHTML = months.toFixed(2);
      document.getElementById('numYears').innerHTML = (months / 12).toFixed(2);


      function xtraCalc(d, r){

      const xtraIntr = r.value;
      console.log(xtraIntr + " xtraIntr");
      const rt = ((xtraIntr / 12) / 100);
      
      const dbt = d.value;
      console.log(dbt + " dbt");

      const freeDat = new Date(document.getElementById("freedomDate").value);
      const totalDys = parseInt((freeDat - new Date) / (1000 * 60 * 60 * 24));
      console.log(totalDys + " totalDys");
      const months = totalDays / 30.44;
      console.log(months + " months");

      const monthlyPay = parseFloat((rt * dbt) / (1 - (Math.pow((1 + rt), (-months)))));
      
      console.log(d);
      console.log(d.id);
      console.log(d.id.value);


      return (monthlyPay).toFixed(2);

      }

      var para1 = document.createElement("p");
      para1.className = 'card bg-warning mb-2';
      var para2 = document.createElement("p");
      para2.className = 'card bg-warning mb-2';
      var para3 = document.createElement("p");
      para3.className = 'card bg-warning mb-2';
      document.getElementById('monthlyPayOutput').appendChild(para1);
      document.getElementsByClassName('card bg-warning mb-2')[1].innerHTML = "debt 2" + " " + xtraCalc(Debt2, rate2); 
      document.getElementById('monthlyPayOutput').appendChild(para2);
      document.getElementsByClassName('card bg-warning mb-2')[2].innerHTML = "debt 3" + " " + xtraCalc(Debt3, rate3)
      document.getElementById('monthlyPayOutput').appendChild(para3);
      document.getElementsByClassName('card bg-warning mb-2')[3].innerHTML = "debt 4" + " " + xtraCalc(Debt4, rate4)
    };

    

    var inputs = document.querySelectorAll('input');
    inputs.forEach((inp) => {
      inp.addEventListener('input', calc)
    });

// function removeInput(id) {
// 	var element = document.getElementById(id);
// 	document.body.removeChild(element);
// }

// // get references to the buttons
// var addDebt = document.querySelector('.additionalDebt');
// var removeDebt = document.querySelector('.additionalDebt');


// // add actions to the click events of the buttons
// addButton.addEventListener('click', function() {
// 	addInput(myInputExample);
// });

// removeButton.addEventListener('click', function() {
// 	removeInput('my-input-id');
// });
    
//     if xtraInputsExist = true && value!== undefined{

// else return 0
// }


// document.getElementById('monthlyPayOutput').innerHTML = (monthlyPmt).toFixed(2) + xtrainputs;
  </script>

  <!-- With thanks to Traversy Media, Isaac Lyman, and fullstackbeginner.com . Styling inspiration from Nodws. -->
  
</body>
</html>
